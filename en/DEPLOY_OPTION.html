
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://aws-samples.github.io/generative-ai-use-cases/en/DEPLOY_OPTION.html">
      
      
        <link rel="prev" href="DEPLOY_ON_CLOUDSHELL.html">
      
      
        <link rel="next" href="SAML_WITH_GOOGLE_WORKSPACE.html">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Deploy Options - Generative AI Use Cases (GenU)</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/custom/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Deploy Options - Generative AI Use Cases (GenU)" >
      
        <meta  property="og:description"  content="None" >
      
        <meta  property="og:image"  content="https://aws-samples.github.io/generative-ai-use-cases/assets/images/social/en/DEPLOY_OPTION.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://aws-samples.github.io/generative-ai-use-cases/en/DEPLOY_OPTION.html" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Deploy Options - Generative AI Use Cases (GenU)" >
      
        <meta  name="twitter:description"  content="None" >
      
        <meta  name="twitter:image"  content="https://aws-samples.github.io/generative-ai-use-cases/assets/images/social/en/DEPLOY_OPTION.png" >
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deploy-option" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Generative AI Use Cases (GenU)" class="md-header__button md-logo" aria-label="Generative AI Use Cases (GenU)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Generative AI Use Cases (GenU)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Deploy Options
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="DEPLOY_OPTION.html" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="../ja/DEPLOY_OPTION.html" hreflang="ja" class="md-select__link">
              日本語
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/aws-samples/generative-ai-use-cases" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    aws-samples/generative-ai-use-cases
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="index.html" class="md-tabs__link">
        
  
  
    
  
  Overview

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="ABOUT.html" class="md-tabs__link">
          
  
  
    
  
  Getting started

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Generative AI Use Cases (GenU)" class="md-nav__button md-logo" aria-label="Generative AI Use Cases (GenU)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Generative AI Use Cases (GenU)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aws-samples/generative-ai-use-cases" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    aws-samples/generative-ai-use-cases
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Deploy
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Deploy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ABOUT.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Start
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="DEPLOY_ON_CLOUDSHELL.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    (Optional) Deploy with AWS CloudShell
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Deploy Options
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="DEPLOY_OPTION.html" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Deploy Options
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuration-method" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Method
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Method">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-change-parameterts-values" class="md-nav__link">
    <span class="md-ellipsis">
      How to change parameter.ts values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-change-cdkjson-values" class="md-nav__link">
    <span class="md-ellipsis">
      How to change cdk.json values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-case-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Use Case Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Use Case Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enabling-rag-chat-amazon-kendra-use-case" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling RAG Chat (Amazon Kendra) Use Case
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Enabling RAG Chat (Amazon Kendra) Use Case">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-an-existing-amazon-kendra-index" class="md-nav__link">
    <span class="md-ellipsis">
      Using an Existing Amazon Kendra Index
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-rag-chat-knowledge-base-use-case" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling RAG Chat (Knowledge Base) Use Case
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Enabling RAG Chat (Knowledge Base) Use Case">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enabling-advanced-parsing" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Advanced Parsing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changing-chunking-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Changing Chunking Strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recreating-knowledge-base-or-opensearch-service-to-apply-changes" class="md-nav__link">
    <span class="md-ellipsis">
      Recreating Knowledge Base or OpenSearch Service to apply changes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-check-opensearch-service-index-in-the-management-console" class="md-nav__link">
    <span class="md-ellipsis">
      How to check OpenSearch Service Index in the management console
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metadata-filter-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Metadata Filter Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-agent-chat-use-case" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Agent Chat Use Case
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Enabling Agent Chat Use Case">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploying-code-interpreter-agent" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying Code Interpreter Agent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploying-search-agent" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying Search Agent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-manually-created-agents" class="md-nav__link">
    <span class="md-ellipsis">
      Adding Manually Created Agents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploying-knowledge-bases-for-amazon-bedrock-agent" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying Knowledge Bases for Amazon Bedrock Agent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#displaying-agents-inline" class="md-nav__link">
    <span class="md-ellipsis">
      Displaying Agents Inline
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-flow-chat-use-case" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Flow Chat Use Case
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-image-generation-use-case" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Image Generation Use Case
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-video-generation-use-case" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Video Generation Use Case
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-video-analysis-use-case" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Video Analysis Use Case
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-prompt-optimization-tool" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Prompt Optimization Tool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hiding-specific-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Hiding Specific Use Cases
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-case-builder-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Use Case Builder Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#change-amazon-bedrock-models" class="md-nav__link">
    <span class="md-ellipsis">
      Change Amazon Bedrock Models
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Change Amazon Bedrock Models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-models-from-multiple-regions-simultaneously" class="md-nav__link">
    <span class="md-ellipsis">
      Using Models from Multiple Regions Simultaneously
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using Models from Multiple Regions Simultaneously">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-using-tokyo-region-as-primary-while-also-using-the-latest-models-from-northern-virginia-and-oregon-regions" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Using Tokyo region as primary while also using the latest models from Northern Virginia and Oregon regions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-using-amazon-bedrock-models-in-us-east-1-virginia" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Using Amazon Bedrock Models in us-east-1 (Virginia)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-using-amazon-bedrock-models-in-us-west-2-oregon" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Using Amazon Bedrock Models in us-west-2 (Oregon)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-using-cross-region-inference-models-from-us-northern-virginia-or-oregon-amazon-bedrock" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Using cross-region inference models from us (Northern Virginia or Oregon) Amazon Bedrock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-using-amazon-bedrock-models-in-ap-northeast-1-tokyo" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Using Amazon Bedrock Models in ap-northeast-1 (Tokyo)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-custom-models-with-amazon-sagemaker" class="md-nav__link">
    <span class="md-ellipsis">
      Using Custom Models with Amazon SageMaker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using Custom Models with Amazon SageMaker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-genu-to-call-deployed-models" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring GenU to Call Deployed Models
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-related-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Security-Related Settings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Security-Related Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disable-self-signup" class="md-nav__link">
    <span class="md-ellipsis">
      Disable Self-Signup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restrict-email-domains-for-sign-up" class="md-nav__link">
    <span class="md-ellipsis">
      Restrict Email Domains for Sign-up
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enable-aws-waf-restrictions" class="md-nav__link">
    <span class="md-ellipsis">
      Enable AWS WAF Restrictions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Enable AWS WAF Restrictions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ip-address-restrictions" class="md-nav__link">
    <span class="md-ellipsis">
      IP Address Restrictions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geographic-restrictions" class="md-nav__link">
    <span class="md-ellipsis">
      Geographic Restrictions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#saml-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      SAML Authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guardrails" class="md-nav__link">
    <span class="md-ellipsis">
      Guardrails
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cost-related-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Cost-Related Settings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cost-Related Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-schedule-for-automatic-creation-and-deletion-of-kendra-index" class="md-nav__link">
    <span class="md-ellipsis">
      Set Schedule for Automatic Creation and Deletion of Kendra Index
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enabling-monitoring-dashboard" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Monitoring Dashboard
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-a-custom-domain" class="md-nav__link">
    <span class="md-ellipsis">
      Using a Custom Domain
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-bedrock-from-a-different-aws-account" class="md-nav__link">
    <span class="md-ellipsis">
      Using Bedrock from a Different AWS Account
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-multiple-environments-in-the-same-account" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying Multiple Environments in the Same Account
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Authentication
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Authentication
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="SAML_WITH_GOOGLE_WORKSPACE.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authenticate with Google Workspace
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="SAML_WITH_ENTRA_ID.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Authenticate with Microsoft Entra ID
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Browser Extension
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Browser Extension
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="EXTENSION.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="EXTENSION_BUILD.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Build
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="EXTENSION_INSTALL.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Install
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="EXTENSION_SAML.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SAML Authentication
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Other
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Other
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="UPDATE.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Update
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="DEVELOPMENT.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Local Development Environment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="DESTROY.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Delete Resources
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="PWA.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Use as a Native App
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#configuration-method" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration Method
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration Method">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-change-parameterts-values" class="md-nav__link">
    <span class="md-ellipsis">
      How to change parameter.ts values
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-change-cdkjson-values" class="md-nav__link">
    <span class="md-ellipsis">
      How to change cdk.json values
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-case-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Use Case Configuration
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Use Case Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enabling-rag-chat-amazon-kendra-use-case" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling RAG Chat (Amazon Kendra) Use Case
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Enabling RAG Chat (Amazon Kendra) Use Case">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-an-existing-amazon-kendra-index" class="md-nav__link">
    <span class="md-ellipsis">
      Using an Existing Amazon Kendra Index
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-rag-chat-knowledge-base-use-case" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling RAG Chat (Knowledge Base) Use Case
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Enabling RAG Chat (Knowledge Base) Use Case">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enabling-advanced-parsing" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Advanced Parsing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#changing-chunking-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Changing Chunking Strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recreating-knowledge-base-or-opensearch-service-to-apply-changes" class="md-nav__link">
    <span class="md-ellipsis">
      Recreating Knowledge Base or OpenSearch Service to apply changes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#how-to-check-opensearch-service-index-in-the-management-console" class="md-nav__link">
    <span class="md-ellipsis">
      How to check OpenSearch Service Index in the management console
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metadata-filter-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Metadata Filter Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-agent-chat-use-case" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Agent Chat Use Case
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Enabling Agent Chat Use Case">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deploying-code-interpreter-agent" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying Code Interpreter Agent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploying-search-agent" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying Search Agent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-manually-created-agents" class="md-nav__link">
    <span class="md-ellipsis">
      Adding Manually Created Agents
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploying-knowledge-bases-for-amazon-bedrock-agent" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying Knowledge Bases for Amazon Bedrock Agent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#displaying-agents-inline" class="md-nav__link">
    <span class="md-ellipsis">
      Displaying Agents Inline
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-flow-chat-use-case" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Flow Chat Use Case
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-image-generation-use-case" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Image Generation Use Case
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-video-generation-use-case" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Video Generation Use Case
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-video-analysis-use-case" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Video Analysis Use Case
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enabling-prompt-optimization-tool" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Prompt Optimization Tool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hiding-specific-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      Hiding Specific Use Cases
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#use-case-builder-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Use Case Builder Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#change-amazon-bedrock-models" class="md-nav__link">
    <span class="md-ellipsis">
      Change Amazon Bedrock Models
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Change Amazon Bedrock Models">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-models-from-multiple-regions-simultaneously" class="md-nav__link">
    <span class="md-ellipsis">
      Using Models from Multiple Regions Simultaneously
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using Models from Multiple Regions Simultaneously">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-using-tokyo-region-as-primary-while-also-using-the-latest-models-from-northern-virginia-and-oregon-regions" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Using Tokyo region as primary while also using the latest models from Northern Virginia and Oregon regions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-using-amazon-bedrock-models-in-us-east-1-virginia" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Using Amazon Bedrock Models in us-east-1 (Virginia)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-using-amazon-bedrock-models-in-us-west-2-oregon" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Using Amazon Bedrock Models in us-west-2 (Oregon)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-using-cross-region-inference-models-from-us-northern-virginia-or-oregon-amazon-bedrock" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Using cross-region inference models from us (Northern Virginia or Oregon) Amazon Bedrock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-using-amazon-bedrock-models-in-ap-northeast-1-tokyo" class="md-nav__link">
    <span class="md-ellipsis">
      Example: Using Amazon Bedrock Models in ap-northeast-1 (Tokyo)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-custom-models-with-amazon-sagemaker" class="md-nav__link">
    <span class="md-ellipsis">
      Using Custom Models with Amazon SageMaker
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using Custom Models with Amazon SageMaker">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuring-genu-to-call-deployed-models" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring GenU to Call Deployed Models
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-related-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Security-Related Settings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Security-Related Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disable-self-signup" class="md-nav__link">
    <span class="md-ellipsis">
      Disable Self-Signup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restrict-email-domains-for-sign-up" class="md-nav__link">
    <span class="md-ellipsis">
      Restrict Email Domains for Sign-up
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enable-aws-waf-restrictions" class="md-nav__link">
    <span class="md-ellipsis">
      Enable AWS WAF Restrictions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Enable AWS WAF Restrictions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ip-address-restrictions" class="md-nav__link">
    <span class="md-ellipsis">
      IP Address Restrictions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geographic-restrictions" class="md-nav__link">
    <span class="md-ellipsis">
      Geographic Restrictions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#saml-authentication" class="md-nav__link">
    <span class="md-ellipsis">
      SAML Authentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guardrails" class="md-nav__link">
    <span class="md-ellipsis">
      Guardrails
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cost-related-settings" class="md-nav__link">
    <span class="md-ellipsis">
      Cost-Related Settings
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cost-Related Settings">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-schedule-for-automatic-creation-and-deletion-of-kendra-index" class="md-nav__link">
    <span class="md-ellipsis">
      Set Schedule for Automatic Creation and Deletion of Kendra Index
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enabling-monitoring-dashboard" class="md-nav__link">
    <span class="md-ellipsis">
      Enabling Monitoring Dashboard
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-a-custom-domain" class="md-nav__link">
    <span class="md-ellipsis">
      Using a Custom Domain
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-bedrock-from-a-different-aws-account" class="md-nav__link">
    <span class="md-ellipsis">
      Using Bedrock from a Different AWS Account
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-multiple-environments-in-the-same-account" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying Multiple Environments in the Same Account
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/docs/en/DEPLOY_OPTION.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/aws-samples/generative-ai-use-cases/raw/main/docs/en/DEPLOY_OPTION.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg>
    </a>
  


<h1 id="deploy-option">Deploy Option<a class="headerlink" href="#deploy-option" title="Permanent link">&para;</a></h1>
<h2 id="configuration-method">Configuration Method<a class="headerlink" href="#configuration-method" title="Permanent link">&para;</a></h2>
<p>GenU allows you to change settings in parameter.ts or through AWS CDK context.</p>
<p><strong>Since you can define settings for multiple environments, it is recommended to use parameter.ts when building a new environment. For backward compatibility, parameters are retrieved in the order of context &gt; parameter.ts.</strong></p>
<p><strong>When using Context: While CDK context can be specified with '-c', this won't trigger frontend builds since no code changes are made. For this asset, it's recommended to change all settings in cdk.json.</strong></p>
<h3 id="how-to-change-parameterts-values">How to change parameter.ts values<a class="headerlink" href="#how-to-change-parameterts-values" title="Permanent link">&para;</a></h3>
<p>Change values in <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">packages/cdk/parameter.ts</a> to configure settings.</p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    ragEnabled: false,
    // Customize other parameters as needed
  },
  staging: {
    ragEnabled: false,
    // Customize other parameters as needed
  },
  prod: {
    ragEnabled: true,
    // Customize other parameters as needed
  },
};
</code></pre>
<p>If the environment specified by <code>env</code> in CDK context is defined in <code>parameter.ts</code>, the values in <code>parameter.ts</code> take precedence. If the specified <code>env</code> environment is not defined in <code>parameter.ts</code>, the environment is created with context values.</p>
<p>You can specify <code>env</code> in the <code>context</code> of <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a> or switch <code>env</code> with <code>-c</code>.</p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;env&quot;: &quot;dev&quot;
  }
}
</code></pre>
<pre><code class="language-bash"># Deploy with the env specified in cdk.json context.env
npm run cdk:deploy

# Deploy with environment set to prod
npm run cdk:deploy -- -c env=prod
</code></pre>
<p>When developing locally, specify <code>env</code> as follows:</p>
<pre><code class="language-bash"># Develop locally using the backend specified by cdk.json context.env
npm run web:devw

# Develop locally using the dev2 environment backend
npm run web:devw --env=dev2
</code></pre>
<h3 id="how-to-change-cdkjson-values">How to change cdk.json values<a class="headerlink" href="#how-to-change-cdkjson-values" title="Permanent link">&para;</a></h3>
<p>Change values under the context in <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a> to configure settings. For example, setting <code>"ragEnabled": true</code> enables the RAG chat use case. After setting context values, redeploy with the following command to apply the settings:</p>
<pre><code class="language-bash">npm run cdk:deploy
</code></pre>
<h2 id="use-case-configuration">Use Case Configuration<a class="headerlink" href="#use-case-configuration" title="Permanent link">&para;</a></h2>
<h3 id="enabling-rag-chat-amazon-kendra-use-case">Enabling RAG Chat (Amazon Kendra) Use Case<a class="headerlink" href="#enabling-rag-chat-amazon-kendra-use-case" title="Permanent link">&para;</a></h3>
<p>Set <code>ragEnabled</code> to <code>true</code>. (Default is <code>false</code>)</p>
<p>You can also set <code>kendraIndexLanguage</code> to prefered language, which may improve search performance.</p>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    ragEnabled: true,
    kendraIndexLanguage: 'en',
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;ragEnabled&quot;: true,
    &quot;kendraIndexLanguage&quot;: &quot;en&quot;
  }
}
</code></pre>
<p>After making changes, redeploy with <code>npm run cdk:deploy</code> to apply the changes. Data stored in <code>/packages/cdk/rag-docs/docs</code> will be automatically uploaded to the S3 bucket for Kendra data source. (Note that files starting with <code>logs</code> will not be synchronized.)</p>
<p>Next, perform Kendra Data source Sync with the following steps:</p>
<ol>
<li>Open the <a href="https://console.aws.amazon.com/kendra/home">Amazon Kendra console</a></li>
<li>Click on generative-ai-use-cases-index</li>
<li>Click on Data sources</li>
<li>Click on "s3-data-source"</li>
<li>Click on Sync now</li>
</ol>
<p>When the Status / Summary in Sync run history shows Completed, the process is finished. Files stored in S3 are synchronized and can be searched through Kendra.</p>
<h4 id="using-an-existing-amazon-kendra-index">Using an Existing Amazon Kendra Index<a class="headerlink" href="#using-an-existing-amazon-kendra-index" title="Permanent link">&para;</a></h4>
<p>When using an existing Kendra Index, note that <code>ragEnabled</code> still needs to be <code>true</code>.</p>
<p>Specify the Index ARN in <code>kendraIndexArn</code>. If you are using an S3 data source with the existing Kendra Index, specify the bucket name in <code>kendraDataSourceBucketName</code>.</p>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    kendraIndexArn: '&lt;Kendra Index ARN&gt;',
    kendraDataSourceBucketName: '&lt;Kendra S3 Data Source Bucket Name&gt;',
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;kendraIndexArn&quot;: &quot;&lt;Kendra Index ARN&gt;&quot;,
    &quot;kendraDataSourceBucketName&quot;: &quot;&lt;Kendra S3 Data Source Bucket Name&gt;&quot;
  }
}
</code></pre>
<p>After making changes, redeploy with <code>npm run cdk:deploy</code> to apply the changes.</p>
<p>The <code>&lt;Kendra Index ARN&gt;</code> has the following format:</p>
<pre><code>arn:aws:kendra:&lt;Region&gt;:&lt;AWS Account ID&gt;:index/&lt;Index ID&gt;
</code></pre>
<p>For example:</p>
<pre><code>arn:aws:kendra:ap-northeast-1:333333333333:index/77777777-3333-4444-aaaa-111111111111
</code></pre>
<h3 id="enabling-rag-chat-knowledge-base-use-case">Enabling RAG Chat (Knowledge Base) Use Case<a class="headerlink" href="#enabling-rag-chat-knowledge-base-use-case" title="Permanent link">&para;</a></h3>
<p>Set <code>ragKnowledgeBaseEnabled</code> to <code>true</code>. (Default is <code>false</code>)<br />
If you have an existing Knowledge Base, set <code>ragKnowledgeBaseId</code> to the knowledge base ID. (If <code>null</code>, an OpenSearch Serverless knowledge base will be created)</p>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    ragKnowledgeBaseEnabled: true,
    ragKnowledgeBaseId: 'XXXXXXXXXX',
    ragKnowledgeBaseStandbyReplicas: false,
    ragKnowledgeBaseAdvancedParsing: false,
    ragKnowledgeBaseAdvancedParsingModelId:
      'anthropic.claude-3-sonnet-20240229-v1:0',
    embeddingModelId: 'amazon.titan-embed-text-v2:0',
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;ragKnowledgeBaseEnabled&quot;: true,
    &quot;ragKnowledgeBaseId&quot;: &quot;XXXXXXXXXX&quot;,
    &quot;ragKnowledgeBaseStandbyReplicas&quot;: false,
    &quot;ragKnowledgeBaseAdvancedParsing&quot;: false,
    &quot;ragKnowledgeBaseAdvancedParsingModelId&quot;: &quot;anthropic.claude-3-sonnet-20240229-v1:0&quot;,
    &quot;embeddingModelId&quot;: &quot;amazon.titan-embed-text-v2:0&quot;,
    &quot;rerankingModelId&quot;: &quot;amazon.rerank-v1:0&quot;,
    &quot;queryDecompositionEnabled&quot;: true
  }
}
</code></pre>
<p><code>ragKnowledgeBaseStandbyReplicas</code> relates to the redundancy of automatically created OpenSearch Serverless:</p>
<ul>
<li><code>false</code>: Suitable for development and testing purposes. Runs in a single AZ, reducing OCU costs by half.</li>
<li><code>true</code>: Suitable for production environments. Runs across multiple AZs, enabling high availability.</li>
</ul>
<p><code>embeddingModelId</code> is the model used for embedding. Currently, the following models are supported:</p>
<pre><code>&quot;amazon.titan-embed-text-v1&quot;
&quot;amazon.titan-embed-text-v2:0&quot;
&quot;cohere.embed-multilingual-v3&quot;
&quot;cohere.embed-english-v3&quot;
</code></pre>
<p><code>rerankingModelId</code> is the model used for reranking. Currently, the following models are supported: (Default is <code>null</code>)</p>
<pre><code>&quot;amazon.rerank-v1:0&quot;
&quot;cohere.rerank-v3-5:0&quot;
</code></pre>
<p><code>queryDecompositionEnabled</code> enables query decomposition. (Default is <code>false</code>)</p>
<p>After making changes, redeploy with <code>npm run cdk:deploy</code> to apply the changes. The Knowledge Base will be deployed in the region specified by <code>modelRegion</code>. Please note the following:</p>
<ul>
<li>At least one model from the <code>modelRegion</code> region must be defined in <code>modelIds</code>.</li>
<li>The <code>embeddingModelId</code> model must be enabled in Bedrock in the <code>modelRegion</code> region.</li>
<li>The <code>rerankingModelId</code> model must be enabled in Bedrock in the <code>modelRegion</code> region.</li>
<li>AWS CDK Bootstrap must be completed in the <code>modelRegion</code> region before running <code>npm run cdk:deploy</code>.</li>
</ul>
<pre><code class="language-bash"># Example bootstrap command (if modelRegion is us-east-1)
npx -w packages/cdk cdk bootstrap --region us-east-1
</code></pre>
<p>During deployment, data stored in <code>/packages/cdk/rag-docs/docs</code> will be automatically uploaded to the S3 bucket for Knowledge Base data source. (Note that files starting with <code>logs</code> will not be synchronized.) After deployment is complete, follow these steps to sync the Knowledge Base Data source:</p>
<ol>
<li>Open the <a href="https://console.aws.amazon.com/bedrock/home#/knowledge-bases">Knowledge Base console</a></li>
<li>Click on generative-ai-use-cases-jp</li>
<li>Select s3-data-source and click Sync</li>
</ol>
<p>When the Status becomes Available, the process is complete. Files stored in S3 have been ingested and can be searched through the Knowledge Base.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After enabling RAG Chat (Knowledge Base), if you want to disable it again, set <code>ragKnowledgeBaseEnabled: false</code> and redeploy. This will disable RAG Chat (Knowledge Base), but the <code>RagKnowledgeBaseStack</code> itself will remain. To completely remove it, open the management console and delete the <code>RagKnowledgeBaseStack</code> stack from CloudFormation in the modelRegion.</p>
</div>
<h4 id="enabling-advanced-parsing">Enabling Advanced Parsing<a class="headerlink" href="#enabling-advanced-parsing" title="Permanent link">&para;</a></h4>
<p>You can enable the <a href="https://docs.aws.amazon.com/bedrock/latest/userguide/kb-chunking-parsing.html#kb-advanced-parsing">Advanced Parsing feature</a>. Advanced Parsing is a feature that analyzes and extracts information from unstructured data such as tables and graphs in files. By adding data extracted from tables and graphs in addition to text in files, it can improve RAG accuracy.</p>
<ul>
<li><code>ragKnowledgeBaseAdvancedParsing</code>: Set to <code>true</code> to enable Advanced Parsing</li>
<li><code>ragKnowledgeBaseAdvancedParsingModelId</code>: Specify the model ID used for extracting information</li>
<li>Supported models (as of 2024/08)<ul>
<li><code>anthropic.claude-3-sonnet-20240229-v1:0</code></li>
<li><code>anthropic.claude-3-haiku-20240307-v1:0</code></li>
</ul>
</li>
</ul>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    ragKnowledgeBaseEnabled: true,
    ragKnowledgeBaseId: 'XXXXXXXXXX',
    ragKnowledgeBaseStandbyReplicas: false,
    ragKnowledgeBaseAdvancedParsing: true,
    ragKnowledgeBaseAdvancedParsingModelId:
      'anthropic.claude-3-sonnet-20240229-v1:0',
    embeddingModelId: 'amazon.titan-embed-text-v2:0',
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;ragKnowledgeBaseEnabled&quot;: true,
    &quot;ragKnowledgeBaseId&quot;: &quot;XXXXXXXXXX&quot;,
    &quot;ragKnowledgeBaseStandbyReplicas&quot;: false,
    &quot;ragKnowledgeBaseAdvancedParsing&quot;: true,
    &quot;ragKnowledgeBaseAdvancedParsingModelId&quot;: &quot;anthropic.claude-3-sonnet-20240229-v1:0&quot;,
    &quot;embeddingModelId&quot;: &quot;amazon.titan-embed-text-v2:0&quot;
  }
}
</code></pre>
<h4 id="changing-chunking-strategy">Changing Chunking Strategy<a class="headerlink" href="#changing-chunking-strategy" title="Permanent link">&para;</a></h4>
<p>In <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/lib/rag-knowledge-base-stack.ts">rag-knowledge-base-stack.ts</a>, there's a section to specify chunkingConfiguration.
Uncomment it and refer to the <a href="https://docs.aws.amazon.com/cdk/api/v2/docs/aws-cdk-lib.aws_bedrock.CfnDataSource.ChunkingConfigurationProperty.html">CDK documentation</a> or <a href="https://docs.aws.amazon.com/bedrock/latest/userguide/kb-chunking-parsing.html">CloudFormation documentation</a> to change to any desired chunking strategy.</p>
<p>For example, to change to semantic chunking, uncomment and specify as follows:</p>
<pre><code class="language-typescript">// packages/cdk/lib/rag-knowledge-base-stack.ts
// Semantic chunking
chunkingConfiguration: {
  chunkingStrategy: 'SEMANTIC',
  semanticChunkingConfiguration: {
    maxTokens: 300,
    bufferSize: 0,
    breakpointPercentileThreshold: 95,
  },
},
</code></pre>
<p>Then, refer to the chapter <a href="DEPLOY_OPTION.html#recreating-knowledge-base-or-opensearch-service-to-apply-changes">Recreating Knowledge Base or OpenSearch Service to apply changes</a> to apply the changes.</p>
<h4 id="recreating-knowledge-base-or-opensearch-service-to-apply-changes">Recreating Knowledge Base or OpenSearch Service to apply changes<a class="headerlink" href="#recreating-knowledge-base-or-opensearch-service-to-apply-changes" title="Permanent link">&para;</a></h4>
<p>For <a href="DEPLOY_OPTION.html#changing-chunking-strategy">Knowledge Base chunking strategy</a> or the following OpenSearch Service parameters, changes will not be reflected if you run <code>npm run cdk:deploy</code> after making changes:</p>
<ul>
<li><code>embeddingModelId</code></li>
<li><code>ragKnowledgeBaseStandbyReplicas</code></li>
<li><code>ragKnowledgeBaseAdvancedParsing</code></li>
<li><code>ragKnowledgeBaseAdvancedParsingModelId</code></li>
</ul>
<p>To apply changes, follow these steps to delete and recreate the existing Knowledge Base-related resources:</p>
<ol>
<li>Set <code>ragKnowledgeBaseEnabled</code> to false and deploy</li>
<li>Open <a href="https://console.aws.amazon.com/cloudformation/home">CloudFormation</a> (note the region), click on RagKnowledgeBaseStack</li>
<li>Click Delete in the upper right to delete RagKnowledgeBaseStack<br />
<strong>This will delete S3 buckets and RAG files, temporarily making RAG chat unavailable</strong></li>
<li>Make changes to parameters or chunking strategy</li>
<li>After RagKnowledgeBaseStack deletion is complete, redeploy with <code>npm run cdk:deploy</code></li>
</ol>
<p>With the deletion of RagKnowledgeBaseStack, <strong>the S3 bucket for RAG chat and the RAG files stored in it will be deleted</strong>.
If you have uploaded RAG files to the S3 bucket, back them up and upload them again after redeployment.
Also, follow the previously mentioned steps to sync the Data source again.</p>
<h4 id="how-to-check-opensearch-service-index-in-the-management-console">How to check OpenSearch Service Index in the management console<a class="headerlink" href="#how-to-check-opensearch-service-index-in-the-management-console" title="Permanent link">&para;</a></h4>
<p>By default, when you open the Indexes tab of OpenSearch Service from the management console, you'll see an error message: <code>User does not have permissions for the requested resource</code>.
This is because the Data access policy doesn't allow the IAM user logged into the management console.
Follow these steps to manually add the necessary permissions:</p>
<ol>
<li>Open <a href="https://console.aws.amazon.com/aos/home?#opensearch/collections">OpenSearch Service</a> (note the region), click on generative-ai-use-cases-jp</li>
<li>Click on the Associated policy named generative-ai-use-cases-jp at the bottom of the page</li>
<li>Click Edit in the upper right</li>
<li>Click Add principals in the Select principals section in the middle of the page, and add the IAM User/Role etc. (the permissions you're logged into the management console with)</li>
<li>Save</li>
</ol>
<p>After saving, wait a moment and try accessing again.</p>
<h4 id="metadata-filter-configuration">Metadata Filter Configuration<a class="headerlink" href="#metadata-filter-configuration" title="Permanent link">&para;</a></h4>
<p>Filter settings can be configured in <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/common/src/custom/rag-knowledge-base.ts">packages/common/src/custom/rag-knowledge-base.ts</a>. Customize as needed.</p>
<ul>
<li><code>dynamicFilters</code>: Dynamically creates and applies filters on the application side. (Example: Creating and applying filters based on user attributes such as department) Currently only supports Claude Sonnet 3.5. (Throttling may occur due to quotas) You can also map Cognito Groups or SAML IdP Groups to Attributes for use. (See <a href="SAML_WITH_ENTRA_ID.html">SAML Integration with Microsoft Entra ID</a> for details)</li>
<li><code>implicitFilters</code>: If specified, the LLM creates and applies filters for the specified metadata based on the user's question. (Example: Filtering by year mentioned in the user's question to search only data from that year) If an empty array, no filters are applied.</li>
<li><code>hiddenStaticExplicitFilters</code>: Applies filters at the application level. (Example: Excluding data classified as secret)</li>
<li><code>userDefinedExplicitFilters</code>: Defines filters displayed in the application UI.</li>
</ul>
<h3 id="enabling-agent-chat-use-case">Enabling Agent Chat Use Case<a class="headerlink" href="#enabling-agent-chat-use-case" title="Permanent link">&para;</a></h3>
<p>In the Agent Chat use case, you can:</p>
<ul>
<li>Use Code Interpreter for data visualization, code execution, and data analysis</li>
<li>Execute actions using Agents for Amazon Bedrock</li>
<li>Reference vector databases from Knowledge Bases for Amazon Bedrock</li>
</ul>
<p>Agents are created in the region specified by <code>modelRegion</code>. The <code>agentEnabled: true</code> option mentioned below is for creating Code Interpreter agents and search agents. When adding manually created Agents, <code>agentEnabled: true</code> is not required.</p>
<h4 id="deploying-code-interpreter-agent">Deploying Code Interpreter Agent<a class="headerlink" href="#deploying-code-interpreter-agent" title="Permanent link">&para;</a></h4>
<p>You can perform data visualization, code execution, data analysis, etc. using Code Interpreter.</p>
<p>The Code Interpreter agent is deployed when you enable Agent.</p>
<p>Set <code>agentEnabled</code> to <code>true</code>. (Default is <code>false</code>)</p>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    agentEnabled: true,
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;agentEnabled&quot;: true
  }
}
</code></pre>
<h4 id="deploying-search-agent">Deploying Search Agent<a class="headerlink" href="#deploying-search-agent" title="Permanent link">&para;</a></h4>
<p>Creates an Agent that connects to APIs to reference the latest information for responses. You can customize the Agent to add other actions and create multiple Agents to switch between.</p>
<p>The default search agent uses <a href="https://brave.com/search/api/">Brave Search API's Data for AI</a> due to its large free tier, request limit considerations, and cost factors, but you can customize it to use other APIs. Getting an API key requires credit card registration even for the free plan.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When you enable the Agent Chat use case, it only sends data to external APIs in the Agent Chat use case. (By default, Brave Search API) Other use cases can continue to be used entirely within AWS. Please check your internal policies and API terms of service before enabling.</p>
</div>
<p>Set <code>agentEnabled</code> and <code>searchAgentEnabled</code> to <code>true</code> (default is <code>false</code>), and specify the search engine API key in <code>searchApiKey</code>.</p>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    agentEnabled: true,
    searchAgentEnabled: true,
    searchApiKey: '&lt;Search Engine API Key&gt;',
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;agentEnabled&quot;: true,
    &quot;searchAgentEnabled&quot;: true,
    &quot;searchApiKey&quot;: &quot;&lt;Search Engine API Key&gt;&quot;
  }
}
</code></pre>
<p>After making changes, redeploy with <code>npm run cdk:deploy</code> to apply the changes. This will deploy the default search engine Agent.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to disable the search agent after enabling it, set <code>searchAgentEnabled: false</code> and redeploy. This will disable the search agent, but the <code>WebSearchAgentStack</code> itself will remain. To completely remove it, open the management console and delete the <code>WebSearchAgentStack</code> stack from CloudFormation in the <code>modelRegion</code>.</p>
</div>
<h4 id="adding-manually-created-agents">Adding Manually Created Agents<a class="headerlink" href="#adding-manually-created-agents" title="Permanent link">&para;</a></h4>
<p>If you want to register manually created Agents other than the default Agents, add additional Agents to <code>agents</code>. Note that Agents should be created in the <code>modelRegion</code>.</p>
<blockquote>
<p>[!NOTE] &gt; <code>agentEnabled: true</code> is an option to create Code Interpreter agents and search agents, so it is not required when adding manually created Agents.</p>
</blockquote>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    agents: [
      {
        displayName: 'MyCustomAgent',
        agentId: 'XXXXXXXXX',
        aliasId: 'YYYYYYYY',
      },
    ],
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;agents&quot;: [
      {
        &quot;displayName&quot;: &quot;MyCustomAgent&quot;,
        &quot;agentId&quot;: &quot;XXXXXXXXX&quot;,
        &quot;aliasId&quot;: &quot;YYYYYYYY&quot;
      }
    ]
  }
}
</code></pre>
<p>You can also modify <code>packages/cdk/lib/construct/agent.ts</code> to define new Agents. If you use Agents defined in CDK, set <code>agentEnabled: true</code>.</p>
<h4 id="deploying-knowledge-bases-for-amazon-bedrock-agent">Deploying Knowledge Bases for Amazon Bedrock Agent<a class="headerlink" href="#deploying-knowledge-bases-for-amazon-bedrock-agent" title="Permanent link">&para;</a></h4>
<p>You can also manually create and register agents that integrate with Knowledge Bases for Amazon Bedrock.</p>
<p>First, create a knowledge base from the <a href="https://console.aws.amazon.com/bedrock/home?#/knowledge-bases">knowledge base AWS console</a> by referring to the <a href="https://docs.aws.amazon.com/bedrock/latest/userguide/knowledge-base-create.html">Knowledge Bases for Amazon Bedrock documentation</a>. Create it in the same region as <code>modelRegion</code>.</p>
<p>Next, manually create an Agent from the <a href="https://console.aws.amazon.com/bedrock/home?#/agents">agent AWS console</a>. Keep the settings mostly default, and enter a prompt referring to the example below for the Agent prompt. Don't set any action groups and proceed, register the knowledge base created in the previous step, and enter a prompt referring to the example below.</p>
<pre><code>Agent prompt example: You are an assistant that responds to instructions. Search for information according to instructions and respond appropriately based on the content. Do not answer about things not mentioned in the information. You can search multiple times.
Knowledge Base prompt example: Search by keywords and get information. You can use it for tasks such as research, asking about X, or summarizing. Guess search keywords from the conversation. Search results may include low-relevance content, so only refer to highly relevant content when answering. You can execute multiple times.
</code></pre>
<p>Create an Alias from the created Agent, copy the <code>agentId</code> and <code>aliasId</code>, and add them in the following format. Set the <code>displayName</code> to the name you want to display in the UI. Also, set <code>agentEnabled</code> to <code>true</code>.</p>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    agentEnabled: true,
    agents: [
      {
        displayName: 'Knowledge Base',
        agentId: 'XXXXXXXXX',
        aliasId: 'YYYYYYYY',
      },
    ],
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;agentEnabled&quot;: true,
    &quot;agents&quot;: [
      {
        &quot;displayName&quot;: &quot;Knowledge Base&quot;,
        &quot;agentId&quot;: &quot;XXXXXXXXX&quot;,
        &quot;aliasId&quot;: &quot;YYYYYYYY&quot;
      }
    ]
  }
}
</code></pre>
<h4 id="displaying-agents-inline">Displaying Agents Inline<a class="headerlink" href="#displaying-agents-inline" title="Permanent link">&para;</a></h4>
<p>By default, Agents can be selected from within the "Agent Chat" use case. By enabling the inline display option, the "Agent Chat" use case will no longer be displayed, and all available Agents will be displayed like other use cases. Set <code>inlineAgents</code> to <code>true</code> when you have valid Agents.</p>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    inlineAgents: true,
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;inlineAgents&quot;: true
  }
}
</code></pre>
<h3 id="enabling-flow-chat-use-case">Enabling Flow Chat Use Case<a class="headerlink" href="#enabling-flow-chat-use-case" title="Permanent link">&para;</a></h3>
<p>In the Flow Chat use case, you can call created Flows.</p>
<p>Add or edit the <code>flows</code> array.</p>
<p>Manually create Flows from the <a href="https://console.aws.amazon.com/bedrock/home#/flows">Amazon Bedrock Flows AWS console</a>. Then create an Alias and add the created Flow's <code>flowId</code>, <code>aliasId</code>, and <code>flowName</code>. In <code>description</code>, write an explanation to prompt user input. This explanation will be displayed in the Flow chat text box. Here's an example:</p>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    flows: [
      {
        flowId: 'XXXXXXXXXX',
        aliasId: 'YYYYYYYYYY',
        flowName: 'WhatIsItFlow',
        description:
          'This flow searches the web for any keyword and returns an explanation. Please enter text',
      },
    ],
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;flows&quot;: [
      {
        &quot;flowId&quot;: &quot;XXXXXXXXXX&quot;,
        &quot;aliasId&quot;: &quot;YYYYYYYYYY&quot;,
        &quot;flowName&quot;: &quot;WhatIsItFlow&quot;,
        &quot;description&quot;: &quot;This flow searches the web for any keyword and returns an explanation. Please enter text&quot;
      },
      {
        &quot;flowId&quot;: &quot;ZZZZZZZZZZ&quot;,
        &quot;aliasId&quot;: &quot;OOOOOOOOOO&quot;,
        &quot;flowName&quot;: &quot;RecipeFlow&quot;,
        &quot;description&quot;: &quot;Creates a recipe based on the given JSON.\nPlease enter like {\&quot;dish\&quot;: \&quot;curry rice\&quot;, \&quot;people\&quot;: 3}.&quot;
      },
      {
        &quot;flowId&quot;: &quot;PPPPPPPPPP&quot;,
        &quot;aliasId&quot;: &quot;QQQQQQQQQQQ&quot;,
        &quot;flowName&quot;: &quot;TravelPlanFlow&quot;,
        &quot;description&quot;: &quot;Creates a travel plan based on the given array.\nPlease enter like [{\&quot;place\&quot;: \&quot;Tokyo\&quot;, \&quot;day\&quot;: 3}, {\&quot;place\&quot;: \&quot;Osaka\&quot;, \&quot;day\&quot;: 2}].&quot;
      }
    ]
  }
}
</code></pre>
<h3 id="enabling-image-generation-use-case">Enabling Image Generation Use Case<a class="headerlink" href="#enabling-image-generation-use-case" title="Permanent link">&para;</a></h3>
<p>This is enabled when you define one or more models in <code>imageGenerationModelIds</code>.
For <code>imageGenerationModelIds</code>, please refer to <a href="#change-amazon-bedrock-models">Changing Amazon Bedrock Models</a>.
For default values, please refer to <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/lib/stack-input.ts">packages/cdk/lib/stack-input.ts</a>.</p>
<h3 id="enabling-video-generation-use-case">Enabling Video Generation Use Case<a class="headerlink" href="#enabling-video-generation-use-case" title="Permanent link">&para;</a></h3>
<p>This is enabled when you define one or more models in <code>videoGenerationModelIds</code>.
For <code>videoGenerationModelIds</code>, please refer to <a href="#change-amazon-bedrock-models">Changing Amazon Bedrock Models</a>.
For default values, please refer to <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/lib/stack-input.ts">packages/cdk/lib/stack-input.ts</a>.</p>
<h3 id="enabling-video-analysis-use-case">Enabling Video Analysis Use Case<a class="headerlink" href="#enabling-video-analysis-use-case" title="Permanent link">&para;</a></h3>
<p>In the video analysis use case, you input video image frames and text to have the LLM analyze the image content.
There is no direct option to enable the video analysis use case, but a multimodal model must be enabled in the parameters.</p>
<p>As of 2025/03, the multimodal models are:</p>
<pre><code>&quot;anthropic.claude-3-5-sonnet-20241022-v2:0&quot;,
&quot;anthropic.claude-3-5-sonnet-20240620-v1:0&quot;,
&quot;anthropic.claude-3-opus-20240229-v1:0&quot;,
&quot;anthropic.claude-3-sonnet-20240229-v1:0&quot;,
&quot;anthropic.claude-3-haiku-20240307-v1:0&quot;,
&quot;us.anthropic.claude-3-5-sonnet-20240620-v1:0&quot;,
&quot;us.anthropic.claude-3-opus-20240229-v1:0&quot;,
&quot;us.anthropic.claude-3-sonnet-20240229-v1:0&quot;,
&quot;us.anthropic.claude-3-haiku-20240307-v1:0&quot;,
&quot;eu.anthropic.claude-3-5-sonnet-20240620-v1:0&quot;,
&quot;eu.anthropic.claude-3-sonnet-20240229-v1:0&quot;,
&quot;eu.anthropic.claude-3-haiku-20240307-v1:0&quot;,
&quot;apac.anthropic.claude-3-haiku-20240307-v1:0&quot;,
&quot;apac.anthropic.claude-3-sonnet-20240229-v1:0&quot;,
&quot;apac.anthropic.claude-3-5-sonnet-20240620-v1:0&quot;,
&quot;apac.anthropic.claude-3-5-sonnet-20241022-v2:0&quot;,
&quot;us.meta.llama3-2-90b-instruct-v1:0&quot;,
&quot;us.meta.llama3-2-11b-instruct-v1:0&quot;,
&quot;us.mistral.pixtral-large-2502-v1:0&quot;,
&quot;eu.mistral.pixtral-large-2502-v1:0&quot;,
&quot;amazon.nova-pro-v1:0&quot;,
&quot;amazon.nova-lite-v1:0&quot;,
&quot;us.amazon.nova-pro-v1:0&quot;,
&quot;us.amazon.nova-lite-v1:0&quot;,
&quot;eu.amazon.nova-pro-v1:0&quot;,
&quot;eu.amazon.nova-lite-v1:0&quot;,
&quot;apac.amazon.nova-pro-v1:0&quot;,
&quot;apac.amazon.nova-lite-v1:0&quot;
</code></pre>
<p>At least one of these must be defined in <code>modelIds</code>.
For details, refer to <a href="#change-amazon-bedrock-models">Changing Amazon Bedrock Models</a>.</p>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    modelIds: ['anthropic.claude-3-sonnet-20240229-v1:0'],
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;modelIds&quot;: [&quot;anthropic.claude-3-sonnet-20240229-v1:0&quot;]
  }
}
</code></pre>
<h3 id="enabling-prompt-optimization-tool">Enabling Prompt Optimization Tool<a class="headerlink" href="#enabling-prompt-optimization-tool" title="Permanent link">&para;</a></h3>
<p>The prompt optimization tool converts input prompts into an optimal form for the specified model.
There is no direct option to enable the prompt optimization tool, but the parameter settings must meet the following two conditions:</p>
<ul>
<li><code>modelRegion</code>: A region where Amazon Bedrock Prompt optimization is supported</li>
<li><code>modelIds</code>: At least one model supported by Amazon Bedrock Prompt optimization is specified</li>
</ul>
<p>For Prompt optimization support status, please refer to <a href="https://docs.aws.amazon.com/bedrock/latest/userguide/prompt-management-optimize.html">this link</a>.</p>
<h3 id="hiding-specific-use-cases">Hiding Specific Use Cases<a class="headerlink" href="#hiding-specific-use-cases" title="Permanent link">&para;</a></h3>
<p>You can hide use cases with the following options.
If not specified or set to false, the use case will be displayed.</p>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    hiddenUseCases: {
      generate: true, // Hide text generation
      summarize: true, // Hide summarization
      writer: true, // Hide writing
      translate: true, // Hide translation
      webContent: true, // Hide Web content extraction
      image: true, // Hide image generation
      video: true, // Hide video generation
      videoAnalyzer: true, // Hide video analysis
      diagram: true, // Hide diagram generation
    },
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;hiddenUseCases&quot;: {
      &quot;generate&quot;: true,
      &quot;summarize&quot;: true,
      &quot;writer&quot;: true,
      &quot;translate&quot;: true,
      &quot;webContent&quot;: true,
      &quot;image&quot;: true,
      &quot;video&quot;: true,
      &quot;videoAnalyzer&quot;: true,
      &quot;diagram&quot;: true
    }
  }
}
</code></pre>
<h2 id="use-case-builder-configuration">Use Case Builder Configuration<a class="headerlink" href="#use-case-builder-configuration" title="Permanent link">&para;</a></h2>
<p>The Use Case Builder is enabled by default and can be accessed from the "Builder Mode" option displayed on the screen after deployment. To disable the Use Case Builder, specify <code>false</code> for the parameter <code>useCaseBuilderEnabled</code>. (Default is <code>true</code>)</p>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    useCaseBuilderEnabled: false,
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;useCaseBuilderEnabled&quot;: false
  }
}
</code></pre>
<h2 id="change-amazon-bedrock-models">Change Amazon Bedrock Models<a class="headerlink" href="#change-amazon-bedrock-models" title="Permanent link">&para;</a></h2>
<p>Specify the model region and models in <code>parameter.ts</code> or <code>cdk.json</code> using <code>modelRegion</code>, <code>modelIds</code>, <code>imageGenerationModelIds</code>, and <code>videoGenerationModelIds</code>. For <code>modelIds</code>, <code>imageGenerationModelIds</code>, and <code>videoGenerationModelIds</code>, specify a list of models you want to use from those available in the specified region. AWS documentation provides a <a href="https://docs.aws.amazon.com/bedrock/latest/userguide/model-ids.html">list of models</a> and <a href="https://docs.aws.amazon.com/bedrock/latest/userguide/models-regions.html">model support by region</a>.</p>
<p>The solution also supports <a href="https://docs.aws.amazon.com/bedrock/latest/userguide/cross-region-inference-support.html">cross-region inference</a> models. Cross-region inference models are represented as <code>{us|eu|apac}.{model-provider}.{model-name}</code> and must match the <code>{us|eu|apac}</code> prefix with the region specified in modelRegion.</p>
<p>(Example) If <code>modelRegion</code> is <code>us-east-1</code>, <code>us.anthropic.claude-3-5-sonnet-20240620-v1:0</code> is OK, but <code>eu.anthropic.claude-3-5-sonnet-20240620-v1:0</code> is not.</p>
<p>This solution supports the following text generation models:</p>
<pre><code>&quot;anthropic.claude-3-5-sonnet-20241022-v2:0&quot;,
&quot;anthropic.claude-3-5-haiku-20241022-v1:0&quot;,
&quot;anthropic.claude-3-5-sonnet-20240620-v1:0&quot;,
&quot;anthropic.claude-3-opus-20240229-v1:0&quot;,
&quot;anthropic.claude-3-sonnet-20240229-v1:0&quot;,
&quot;anthropic.claude-3-haiku-20240307-v1:0&quot;,
&quot;us.anthropic.claude-3-7-sonnet-20250219-v1:0&quot;,
&quot;us.anthropic.claude-3-5-sonnet-20241022-v2:0&quot;,
&quot;us.anthropic.claude-3-5-haiku-20241022-v1:0&quot;,
&quot;us.anthropic.claude-3-5-sonnet-20240620-v1:0&quot;,
&quot;us.anthropic.claude-3-opus-20240229-v1:0&quot;,
&quot;us.anthropic.claude-3-sonnet-20240229-v1:0&quot;,
&quot;us.anthropic.claude-3-haiku-20240307-v1:0&quot;,
&quot;eu.anthropic.claude-3-5-sonnet-20240620-v1:0&quot;,
&quot;eu.anthropic.claude-3-sonnet-20240229-v1:0&quot;,
&quot;eu.anthropic.claude-3-haiku-20240307-v1:0&quot;,
&quot;apac.anthropic.claude-3-haiku-20240307-v1:0&quot;,
&quot;apac.anthropic.claude-3-sonnet-20240229-v1:0&quot;,
&quot;apac.anthropic.claude-3-5-sonnet-20240620-v1:0&quot;,
&quot;apac.anthropic.claude-3-5-sonnet-20241022-v2:0&quot;,
&quot;us.deepseek.r1-v1:0&quot;,
&quot;amazon.titan-text-premier-v1:0&quot;,
&quot;us.meta.llama3-3-70b-instruct-v1:0&quot;,
&quot;us.meta.llama3-2-90b-instruct-v1:0&quot;,
&quot;us.meta.llama3-2-11b-instruct-v1:0&quot;,
&quot;us.meta.llama3-2-3b-instruct-v1:0&quot;,
&quot;us.meta.llama3-2-1b-instruct-v1:0&quot;,
&quot;meta.llama3-1-405b-instruct-v1:0&quot;,
&quot;meta.llama3-1-70b-instruct-v1:0&quot;,
&quot;meta.llama3-1-8b-instruct-v1:0&quot;,
&quot;meta.llama3-70b-instruct-v1:0&quot;,
&quot;meta.llama3-8b-instruct-v1:0&quot;,
&quot;cohere.command-r-plus-v1:0&quot;,
&quot;cohere.command-r-v1:0&quot;,
&quot;mistral.mistral-large-2407-v1:0&quot;,
&quot;mistral.mistral-large-2402-v1:0&quot;,
&quot;mistral.mistral-small-2402-v1:0&quot;,
&quot;us.mistral.pixtral-large-2502-v1:0&quot;,
&quot;eu.mistral.pixtral-large-2502-v1:0&quot;,
&quot;anthropic.claude-v2:1&quot;,
&quot;anthropic.claude-v2&quot;,
&quot;anthropic.claude-instant-v1&quot;,
&quot;mistral.mixtral-8x7b-instruct-v0:1&quot;,
&quot;mistral.mistral-7b-instruct-v0:2&quot;,
&quot;amazon.nova-pro-v1:0&quot;,
&quot;amazon.nova-lite-v1:0&quot;,
&quot;amazon.nova-micro-v1:0&quot;,
&quot;us.amazon.nova-pro-v1:0&quot;,
&quot;us.amazon.nova-lite-v1:0&quot;,
&quot;us.amazon.nova-micro-v1:0&quot;,
&quot;eu.amazon.nova-pro-v1:0&quot;,
&quot;eu.amazon.nova-lite-v1:0&quot;,
&quot;eu.amazon.nova-micro-v1:0&quot;,
&quot;apac.amazon.nova-pro-v1:0&quot;,
&quot;apac.amazon.nova-lite-v1:0&quot;,
&quot;apac.amazon.nova-micro-v1:0&quot;
</code></pre>
<p>This solution supports the following image generation models:</p>
<pre><code>&quot;amazon.nova-canvas-v1:0&quot;,
&quot;amazon.titan-image-generator-v2:0&quot;,
&quot;amazon.titan-image-generator-v1&quot;,
&quot;stability.sd3-large-v1:0&quot;,
&quot;stability.sd3-5-large-v1:0&quot;,
&quot;stability.stable-image-core-v1:0&quot;,
&quot;stability.stable-image-core-v1:1&quot;,
&quot;stability.stable-image-ultra-v1:0&quot;,
&quot;stability.stable-image-ultra-v1:1&quot;,
&quot;stability.stable-diffusion-xl-v1&quot;,
</code></pre>
<p>This solution supports the following video generation models:</p>
<pre><code>&quot;amazon.nova-reel-v1:0&quot;,
&quot;luma.ray-v2:0&quot;
</code></pre>
<p><strong>Please verify that the models you specify are enabled in the specified region.</strong></p>
<h3 id="using-models-from-multiple-regions-simultaneously">Using Models from Multiple Regions Simultaneously<a class="headerlink" href="#using-models-from-multiple-regions-simultaneously" title="Permanent link">&para;</a></h3>
<p>By default, GenU uses models from the <code>modelRegion</code>. If you want to use the latest models that are only available in certain regions, you can specify <code>{modelId: '&lt;model name&gt;', region: '&lt;region code&gt;'}</code> in <code>modelIds</code>, <code>imageGenerationModelIds</code>, or <code>videoGenerationModelIds</code> to call that specific model from the specified region.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using both the <a href="#enabling-monitoring-dashboard">monitoring dashboard</a> and models from multiple regions, the default dashboard settings will not display prompt logs for models outside the primary region (<code>modelRegion</code>).</p>
<p>To view prompt logs from all regions in a single dashboard, you need these additional configurations:</p>
<ol>
<li>Manually enable "Model invocation logging" in the Amazon Bedrock settings for each region</li>
<li>Add widgets to the CloudWatch dashboard to aggregate logs from each region</li>
</ol>
</div>
<h4 id="example-using-tokyo-region-as-primary-while-also-using-the-latest-models-from-northern-virginia-and-oregon-regions">Example: Using Tokyo region as primary while also using the latest models from Northern Virginia and Oregon regions<a class="headerlink" href="#example-using-tokyo-region-as-primary-while-also-using-the-latest-models-from-northern-virginia-and-oregon-regions" title="Permanent link">&para;</a></h4>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    modelRegion: 'ap-northeast-1',
    modelIds: [
      {
        modelId: 'us.anthropic.claude-3-7-sonnet-20250219-v1:0',
        region: 'us-east-1',
      },
      'apac.anthropic.claude-3-5-sonnet-20241022-v2:0',
      'anthropic.claude-3-5-sonnet-20240620-v1:0',
      {
        modelId: 'us.anthropic.claude-3-5-haiku-20241022-v1:0',
        region: 'us-east-1',
      },
      'apac.amazon.nova-pro-v1:0',
      'apac.amazon.nova-lite-v1:0',
      'apac.amazon.nova-micro-v1:0',
      { modelId: 'us.deepseek.r1-v1:0', region: 'us-east-1' },
      { modelId: 'us.meta.llama3-3-70b-instruct-v1:0', region: 'us-east-1' },
      { modelId: 'us.meta.llama3-2-90b-instruct-v1:0', region: 'us-east-1' },
      { modelId: 'us.mistral.pixtral-large-2502-v1:0', region: 'us-east-1' },
    ],
    imageGenerationModelIds: [
      'amazon.nova-canvas-v1:0',
      { modelId: 'stability.sd3-5-large-v1:0', region: 'us-west-2' },
      { modelId: 'stability.stable-image-core-v1:1', region: 'us-west-2' },
      { modelId: 'stability.stable-image-ultra-v1:1', region: 'us-west-2' },
    ],
    videoGenerationModelIds: [
      'amazon.nova-reel-v1:0',
      { modelId: 'luma.ray-v2:0', region: 'us-west-2' },
    ],
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">{
  &quot;context&quot;: {
    &quot;modelRegion&quot;: &quot;ap-northeast-1&quot;,
    &quot;modelIds&quot;: [
      {
        &quot;modelId&quot;: &quot;us.anthropic.claude-3-7-sonnet-20250219-v1:0&quot;,
        &quot;region&quot;: &quot;us-east-1&quot;
      },
      &quot;apac.anthropic.claude-3-5-sonnet-20241022-v2:0&quot;,
      &quot;anthropic.claude-3-5-sonnet-20240620-v1:0&quot;,
      {
        &quot;modelId&quot;: &quot;us.anthropic.claude-3-5-haiku-20241022-v1:0&quot;,
        &quot;region&quot;: &quot;us-east-1&quot;
      },
      &quot;apac.amazon.nova-pro-v1:0&quot;,
      &quot;apac.amazon.nova-lite-v1:0&quot;,
      &quot;apac.amazon.nova-micro-v1:0&quot;,
      {
        &quot;modelId&quot;: &quot;us.deepseek.r1-v1:0&quot;,
        &quot;region&quot;: &quot;us-east-1&quot;
      },
      {
        &quot;modelId&quot;: &quot;us.meta.llama3-3-70b-instruct-v1:0&quot;,
        &quot;region&quot;: &quot;us-east-1&quot;
      },
      {
        &quot;modelId&quot;: &quot;us.meta.llama3-2-90b-instruct-v1:0&quot;,
        &quot;region&quot;: &quot;us-east-1&quot;
      },
      {
        &quot;modelId&quot;: &quot;us.mistral.pixtral-large-2502-v1:0&quot;,
        &quot;region&quot;: &quot;us-east-1&quot;
      }
    ],
    &quot;imageGenerationModelIds&quot;: [
      &quot;amazon.nova-canvas-v1:0&quot;,
      {
        &quot;modelId&quot;: &quot;stability.sd3-5-large-v1:0&quot;,
        &quot;region&quot;: &quot;us-west-2&quot;
      },
      {
        &quot;modelId&quot;: &quot;stability.stable-image-core-v1:1&quot;,
        &quot;region&quot;: &quot;us-west-2&quot;
      },
      {
        &quot;modelId&quot;: &quot;stability.stable-image-ultra-v1:1&quot;,
        &quot;region&quot;: &quot;us-west-2&quot;
      }
    ],
    &quot;videoGenerationModelIds&quot;: [
      &quot;amazon.nova-reel-v1:0&quot;,
      {
        &quot;modelId&quot;: &quot;luma.ray-v2:0&quot;,
        &quot;region&quot;: &quot;us-west-2&quot;
      }
    ]
  }
}
</code></pre>
<h3 id="example-using-amazon-bedrock-models-in-us-east-1-virginia">Example: Using Amazon Bedrock Models in us-east-1 (Virginia)<a class="headerlink" href="#example-using-amazon-bedrock-models-in-us-east-1-virginia" title="Permanent link">&para;</a></h3>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    modelRegion: 'us-east-1',
    modelIds: [
      'anthropic.claude-3-5-sonnet-20240620-v1:0',
      'anthropic.claude-3-sonnet-20240229-v1:0',
      'anthropic.claude-3-haiku-20240307-v1:0',
      'amazon.nova-pro-v1:0',
      'amazon.nova-lite-v1:0',
      'amazon.nova-micro-v1:0',
      'amazon.titan-text-premier-v1:0',
      'meta.llama3-70b-instruct-v1:0',
      'meta.llama3-8b-instruct-v1:0',
      'cohere.command-r-plus-v1:0',
      'cohere.command-r-v1:0',
      'us.mistral.pixtral-large-2502-v1:0',
      'mistral.mistral-large-2402-v1:0',
    ],
    imageGenerationModelIds: [
      'amazon.nova-canvas-v1:0',
      'amazon.titan-image-generator-v2:0',
      'amazon.titan-image-generator-v1',
      'stability.stable-diffusion-xl-v1',
    ],
    videoGenerationModelIds: ['amazon.nova-reel-v1:0'],
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;modelRegion&quot;: &quot;us-east-1&quot;,
    &quot;modelIds&quot;: [
      &quot;anthropic.claude-3-5-sonnet-20240620-v1:0&quot;,
      &quot;anthropic.claude-3-sonnet-20240229-v1:0&quot;,
      &quot;anthropic.claude-3-haiku-20240307-v1:0&quot;,
      &quot;amazon.nova-pro-v1:0&quot;,
      &quot;amazon.nova-lite-v1:0&quot;,
      &quot;amazon.nova-micro-v1:0&quot;,
      &quot;amazon.titan-text-premier-v1:0&quot;,
      &quot;meta.llama3-70b-instruct-v1:0&quot;,
      &quot;meta.llama3-8b-instruct-v1:0&quot;,
      &quot;cohere.command-r-plus-v1:0&quot;,
      &quot;cohere.command-r-v1:0&quot;,
      &quot;mistral.mistral-large-2402-v1:0&quot;
    ],
    &quot;imageGenerationModelIds&quot;: [
      &quot;amazon.nova-canvas-v1:0&quot;,
      &quot;amazon.titan-image-generator-v2:0&quot;,
      &quot;amazon.titan-image-generator-v1&quot;,
      &quot;stability.stable-diffusion-xl-v1&quot;
    ],
    &quot;videoGenerationModelIds&quot;: [&quot;amazon.nova-reel-v1:0&quot;]
  }
}
</code></pre>
<h3 id="example-using-amazon-bedrock-models-in-us-west-2-oregon">Example: Using Amazon Bedrock Models in us-west-2 (Oregon)<a class="headerlink" href="#example-using-amazon-bedrock-models-in-us-west-2-oregon" title="Permanent link">&para;</a></h3>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    modelRegion: 'us-west-2',
    modelIds: [
      'anthropic.claude-3-5-sonnet-20241022-v2:0',
      'anthropic.claude-3-5-haiku-20241022-v1:0',
      'anthropic.claude-3-5-sonnet-20240620-v1:0',
      'anthropic.claude-3-opus-20240229-v1:0',
      'anthropic.claude-3-sonnet-20240229-v1:0',
      'anthropic.claude-3-haiku-20240307-v1:0',
      'meta.llama3-1-70b-instruct-v1:0',
      'meta.llama3-1-8b-instruct-v1:0',
      'cohere.command-r-plus-v1:0',
      'cohere.command-r-v1:0',
      'mistral.mistral-large-2407-v1:0',
    ],
    imageGenerationModelIds: [
      'amazon.titan-image-generator-v2:0',
      'amazon.titan-image-generator-v1',
      'stability.sd3-large-v1:0',
      'stability.sd3-5-large-v1:0',
      'stability.stable-image-core-v1:0',
      'stability.stable-image-core-v1:1',
      'stability.stable-image-ultra-v1:0',
      'stability.stable-image-ultra-v1:1',
      'stability.stable-diffusion-xl-v1',
    ],
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;modelRegion&quot;: &quot;us-west-2&quot;,
    &quot;modelIds&quot;: [
      &quot;anthropic.claude-3-5-sonnet-20241022-v2:0&quot;,
      &quot;anthropic.claude-3-5-haiku-20241022-v1:0&quot;,
      &quot;anthropic.claude-3-5-sonnet-20240620-v1:0&quot;,
      &quot;anthropic.claude-3-opus-20240229-v1:0&quot;,
      &quot;anthropic.claude-3-sonnet-20240229-v1:0&quot;,
      &quot;anthropic.claude-3-haiku-20240307-v1:0&quot;,
      &quot;meta.llama3-1-70b-instruct-v1:0&quot;,
      &quot;meta.llama3-1-8b-instruct-v1:0&quot;,
      &quot;cohere.command-r-plus-v1:0&quot;,
      &quot;cohere.command-r-v1:0&quot;,
      &quot;mistral.mistral-large-2407-v1:0&quot;
    ],
    &quot;imageGenerationModelIds&quot;: [
      &quot;amazon.titan-image-generator-v2:0&quot;,
      &quot;amazon.titan-image-generator-v1&quot;,
      &quot;stability.sd3-large-v1:0&quot;,
      &quot;stability.sd3-5-large-v1:0&quot;
      &quot;stability.stable-image-core-v1:0&quot;,
      &quot;stability.stable-image-core-v1:1&quot;,
      &quot;stability.stable-image-ultra-v1:0&quot;,
      &quot;stability.stable-image-ultra-v1:1&quot;,
      &quot;stability.stable-diffusion-xl-v1&quot;,
    ],
  }
}
</code></pre>
<h3 id="example-using-cross-region-inference-models-from-us-northern-virginia-or-oregon-amazon-bedrock">Example: Using cross-region inference models from us (Northern Virginia or Oregon) Amazon Bedrock<a class="headerlink" href="#example-using-cross-region-inference-models-from-us-northern-virginia-or-oregon-amazon-bedrock" title="Permanent link">&para;</a></h3>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    modelRegion: 'us-east-2',
    modelIds: [
      &quot;us.anthropic.claude-3-7-sonnet-20250219-v1:0&quot;,
      &quot;us.anthropic.claude-3-5-sonnet-20241022-v2:0&quot;,
      &quot;us.anthropic.claude-3-5-haiku-20241022-v1:0&quot;,
      &quot;us.anthropic.claude-3-5-sonnet-20240620-v1:0&quot;,
      &quot;us.anthropic.claude-3-opus-20240229-v1:0&quot;,
      &quot;us.anthropic.claude-3-sonnet-20240229-v1:0&quot;,
      &quot;us.anthropic.claude-3-haiku-20240307-v1:0&quot;,
      &quot;us.deepseek.r1-v1:0&quot;,
      &quot;us.meta.llama3-3-70b-instruct-v1:0&quot;,
      &quot;us.meta.llama3-2-90b-instruct-v1:0&quot;,
      &quot;us.meta.llama3-2-11b-instruct-v1:0&quot;,
      &quot;us.meta.llama3-2-3b-instruct-v1:0&quot;,
      &quot;us.meta.llama3-2-1b-instruct-v1:0&quot;,
      &quot;us.amazon.nova-pro-v1:0&quot;,
      &quot;us.amazon.nova-lite-v1:0&quot;,
      &quot;us.amazon.nova-micro-v1:0&quot;,
      &quot;cohere.command-r-plus-v1:0&quot;,
      &quot;cohere.command-r-v1:0&quot;,
      &quot;mistral.mistral-large-2407-v1:0&quot;,
    ],
    imageGenerationModelIds: [
      &quot;amazon.titan-image-generator-v2:0&quot;,
      &quot;amazon.titan-image-generator-v1&quot;,
      &quot;stability.sd3-large-v1:0&quot;,
      &quot;stability.sd3-5-large-v1:0&quot;
      &quot;stability.stable-image-core-v1:0&quot;,
      &quot;stability.stable-image-core-v1:1&quot;,
      &quot;stability.stable-image-ultra-v1:0&quot;,
      &quot;stability.stable-image-ultra-v1:1&quot;,
      &quot;stability.stable-diffusion-xl-v1&quot;,
    ],
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;modelRegion&quot;: &quot;us-west-2&quot;,
    &quot;modelIds&quot;: [
      &quot;us.anthropic.claude-3-7-sonnet-20250219-v1:0&quot;,
      &quot;us.anthropic.claude-3-5-sonnet-20241022-v2:0&quot;,
      &quot;us.anthropic.claude-3-5-haiku-20241022-v1:0&quot;,
      &quot;us.anthropic.claude-3-5-sonnet-20240620-v1:0&quot;,
      &quot;us.anthropic.claude-3-opus-20240229-v1:0&quot;,
      &quot;us.anthropic.claude-3-sonnet-20240229-v1:0&quot;,
      &quot;us.anthropic.claude-3-haiku-20240307-v1:0&quot;,
      &quot;us.deepseek.r1-v1:0&quot;,
      &quot;us.meta.llama3-3-70b-instruct-v1:0&quot;,
      &quot;us.meta.llama3-2-90b-instruct-v1:0&quot;,
      &quot;us.meta.llama3-2-11b-instruct-v1:0&quot;,
      &quot;us.meta.llama3-2-3b-instruct-v1:0&quot;,
      &quot;us.meta.llama3-2-1b-instruct-v1:0&quot;,
      &quot;us.amazon.nova-pro-v1:0&quot;,
      &quot;us.amazon.nova-lite-v1:0&quot;,
      &quot;us.amazon.nova-micro-v1:0&quot;,
      &quot;cohere.command-r-plus-v1:0&quot;,
      &quot;cohere.command-r-v1:0&quot;,
      &quot;mistral.mistral-large-2407-v1:0&quot;
    ],
    &quot;imageGenerationModelIds&quot;: [
      &quot;amazon.titan-image-generator-v2:0&quot;,
      &quot;amazon.titan-image-generator-v1&quot;,
      &quot;stability.sd3-large-v1:0&quot;,
      &quot;stability.sd3-5-large-v1:0&quot;
      &quot;stability.stable-image-core-v1:0&quot;,
      &quot;stability.stable-image-core-v1:1&quot;,
      &quot;stability.stable-image-ultra-v1:0&quot;,
      &quot;stability.stable-image-ultra-v1:1&quot;,
      &quot;stability.stable-diffusion-xl-v1&quot;,
    ],
  }
}
</code></pre>
<h3 id="example-using-amazon-bedrock-models-in-ap-northeast-1-tokyo">Example: Using Amazon Bedrock Models in ap-northeast-1 (Tokyo)<a class="headerlink" href="#example-using-amazon-bedrock-models-in-ap-northeast-1-tokyo" title="Permanent link">&para;</a></h3>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, StackInput&gt; = {
  dev: {
    modelRegion: 'ap-northeast-1',
    modelIds: [
      'anthropic.claude-3-5-sonnet-20240620-v1:0',
      'anthropic.claude-3-haiku-20240307-v1:0',
    ],
    imageGenerationModelIds: ['amazon.nova-canvas-v1:0'],
    videoGenerationModelIds: ['amazon.nova-reel-v1:0'],
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;modelRegion&quot;: &quot;ap-northeast-1&quot;,
    &quot;modelIds&quot;: [
      &quot;anthropic.claude-3-5-sonnet-20240620-v1:0&quot;,
      &quot;anthropic.claude-3-haiku-20240307-v1:0&quot;
    ],
    &quot;imageGenerationModelIds&quot;: [&quot;amazon.nova-canvas-v1:0&quot;],
    &quot;videoGenerationModelIds&quot;: [&quot;amazon.nova-reel-v1:0&quot;]
  }
}
</code></pre>
<h2 id="using-custom-models-with-amazon-sagemaker">Using Custom Models with Amazon SageMaker<a class="headerlink" href="#using-custom-models-with-amazon-sagemaker" title="Permanent link">&para;</a></h2>
<p>You can use large language models deployed to Amazon SageMaker endpoints. This solution supports SageMaker endpoints using <a href="https://aws.amazon.com/blogs/machine-learning/announcing-the-launch-of-new-hugging-face-llm-inference-containers-on-amazon-sagemaker/">Hugging Face's Text Generation Inference (TGI) LLM inference containers</a>. Ideally, the models should support chat-formatted prompts where user and assistant take turns speaking. Currently, image generation use cases are not supported with Amazon SageMaker endpoints.</p>
<p>There are two ways to deploy models using TGI containers to SageMaker endpoints:</p>
<p><strong>Deploy pre-packaged models from SageMaker JumpStart</strong></p>
<p>SageMaker JumpStart offers one-click deployment of packaged open-source large language models. You can deploy these models by opening them in the JumpStart screen in SageMaker Studio and clicking the "Deploy" button. Examples of Japanese models provided include:</p>
<ul>
<li><a href="https://aws.amazon.com/jp/blogs/news/sagemaker-jumpstart-elyza-7b/">SageMaker JumpStart Elyza Japanese Llama 2 7B Instruct</a></li>
<li><a href="https://aws.amazon.com/jp/blogs/news/sagemaker-jumpstart-elyza-7b/">SageMaker JumpStart Elyza Japanese Llama 2 13B Instruct</a></li>
<li><a href="https://aws.amazon.com/jp/blogs/news/cyberagentlm2-on-sagemaker-jumpstart/">SageMaker JumpStart CyberAgentLM2 7B Chat</a></li>
<li><a href="https://aws.amazon.com/jp/blogs/news/japanese-stable-lm-instruct-alpha-7b-v2-from-stability-ai-is-now-available-in-amazon-sagemaker-jumpstart/">SageMaker JumpStart Stable LM Instruct Alpha 7B v2</a></li>
<li><a href="https://aws.amazon.com/jp/blogs/news/generative-ai-rinna-japanese-llm-on-amazon-sagemaker-jumpstart/">SageMaker JumpStart Rinna 3.6B</a></li>
<li><a href="https://aws.amazon.com/jp/blogs/news/generative-ai-rinna-japanese-llm-on-amazon-sagemaker-jumpstart/">SageMaker JumpStart Bilingual Rinna 4B</a></li>
</ul>
<p><strong>Deploy with a few lines of code using SageMaker SDK</strong></p>
<p>Thanks to <a href="https://aws.amazon.com/jp/blogs/news/aws-and-hugging-face-collaborate-to-make-generative-ai-more-accessible-and-cost-efficient/">AWS's partnership with Hugging Face</a>, you can deploy models by simply specifying the model ID from Hugging Face using the SageMaker SDK.</p>
<p>From a model's Hugging Face page, select <em>Deploy</em> &gt; <em>Amazon SageMaker</em> to see the code for deploying the model. Copy and run this code to deploy the model. (You may need to adjust parameters like instance size or <code>SM_NUM_GPUS</code> depending on the model. If deployment fails, you can check the logs in CloudWatch Logs.)</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There's one modification needed when deploying: The endpoint name will be displayed in the GenU application and is used to determine the model's prompt template (explained in the next section). Therefore, you need to specify a distinguishable endpoint name.
 Add <code>endpoint_name="&lt;distinguishable endpoint name&gt;"</code> as an argument to <code>huggingface_model.deploy()</code> when deploying.</p>
</div>
<p><img alt="Select Amazon SageMaker from Deploy on Hugging Face model page" src="../assets/DEPLOY_OPTION/HF_Deploy.png" />
<img alt="Deployment script guide on Hugging Face model page" src="../assets/DEPLOY_OPTION/HF_Deploy2.png" /></p>
<h3 id="configuring-genu-to-call-deployed-models">Configuring GenU to Call Deployed Models<a class="headerlink" href="#configuring-genu-to-call-deployed-models" title="Permanent link">&para;</a></h3>
<p>To use deployed SageMaker endpoints with the target solution, specify them as follows:</p>
<p>endpointNames is a list of SageMaker endpoint names. (Example: <code>["elyza-llama-2", "rinna"]</code>)</p>
<p>To specify the prompt template used when constructing prompts in the backend, you need to include the prompt type in the endpoint name. (Example: <code>llama-2</code>, <code>rinna</code>, etc.) See <code>packages/cdk/lambda/utils/models.ts</code> for details. Add prompt templates as needed.</p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    modelRegion: 'us-east-1',
    endpointNames: [
      'jumpstart-dft-hf-llm-rinna-3-6b-instruction-ppo-bf16',
      'jumpstart-dft-bilingual-rinna-4b-instruction-ppo-bf16',
    ],
  },
};
</code></pre>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;modelRegion&quot;: &quot;&lt;SageMaker Endpoint Region&gt;&quot;,
    &quot;endpointNames&quot;: [&quot;&lt;SageMaker Endpoint Name&gt;&quot;]
  }
}
</code></pre>
<p><strong>Example: Using Rinna 3.6B and Bilingual Rinna 4B</strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;modelRegion&quot;: &quot;us-west-2&quot;,
    &quot;endpointNames&quot;: [
      &quot;jumpstart-dft-hf-llm-rinna-3-6b-instruction-ppo-bf16&quot;,
      &quot;jumpstart-dft-bilingual-rinna-4b-instruction-ppo-bf16&quot;
    ]
  }
}
</code></pre>
<p><strong>Example: Using ELYZA-japanese-Llama-2-7b-instruct</strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;modelRegion&quot;: &quot;us-west-2&quot;,
    &quot;endpointNames&quot;: [&quot;elyza-japanese-llama-2-7b-inference&quot;]
  }
}
</code></pre>
<h2 id="security-related-settings">Security-Related Settings<a class="headerlink" href="#security-related-settings" title="Permanent link">&para;</a></h2>
<h3 id="disable-self-signup">Disable Self-Signup<a class="headerlink" href="#disable-self-signup" title="Permanent link">&para;</a></h3>
<p>Set <code>selfSignUpEnabled</code> to <code>false</code>. (Default is <code>true</code>)</p>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    selfSignUpEnabled: false,
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;selfSignUpEnabled&quot;: false
  }
}
</code></pre>
<h3 id="restrict-email-domains-for-sign-up">Restrict Email Domains for Sign-up<a class="headerlink" href="#restrict-email-domains-for-sign-up" title="Permanent link">&para;</a></h3>
<p>Specify a list of allowed domains in <code>allowedSignUpEmailDomains</code> (default is <code>null</code>).</p>
<p>Specify values as a list of strings, and do not include "@" in each string. Users can sign up if their email domain matches any of the allowed domains. Specifying <code>null</code> means no restrictions, allowing all domains. Specifying <code>[]</code> prohibits all domains, preventing any email address from registering.</p>
<p>When configured, users with non-allowed domains will receive an error when trying to "Create Account" on the web signup screen, preventing them from signing up for GenU. Also, attempting to "Create User" from the Cognito service screen in the AWS Management Console will result in an error.</p>
<p>This does not affect users already created in Cognito. It only applies to new users attempting to sign up or be created.</p>
<p>Configuration Examples</p>
<ul>
<li>Example to allow sign-up only with email addresses with the <code>amazon.com</code> domain</li>
</ul>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    allowedSignUpEmailDomains: ['amazon.com'],
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;allowedSignUpEmailDomains&quot;: [&quot;amazon.com&quot;] // Change from null to specify allowed domains to enable
  }
}
</code></pre>
<ul>
<li>Example to allow sign-up with email addresses with either <code>amazon.com</code> or <code>amazon.jp</code> domains</li>
</ul>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    allowedSignUpEmailDomains: ['amazon.com', 'amazon.jp'],
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;allowedSignUpEmailDomains&quot;: [&quot;amazon.com&quot;, &quot;amazon.jp&quot;] // Change from null to specify allowed domains to enable
  }
}
</code></pre>
<h3 id="enable-aws-waf-restrictions">Enable AWS WAF Restrictions<a class="headerlink" href="#enable-aws-waf-restrictions" title="Permanent link">&para;</a></h3>
<h4 id="ip-address-restrictions">IP Address Restrictions<a class="headerlink" href="#ip-address-restrictions" title="Permanent link">&para;</a></h4>
<p>To restrict web app access by IP address, you can enable AWS WAF IP address restrictions. You can specify allowed IPv4 CIDRs in an array with <code>allowedIpV4AddressRanges</code> and allowed IPv6 CIDRs in an array with <code>allowedIpV6AddressRanges</code>.</p>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    allowedIpV4AddressRanges: ['192.168.0.0/24'],
    allowedIpV6AddressRanges: ['2001:0db8::/32'],
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;allowedIpV4AddressRanges&quot;: [&quot;192.168.0.0/24&quot;], // Change from null to specify allowed CIDR list to enable
    &quot;allowedIpV6AddressRanges&quot;: [&quot;2001:0db8::/32&quot;] // Change from null to specify allowed CIDR list to enable
  }
}
</code></pre>
<h4 id="geographic-restrictions">Geographic Restrictions<a class="headerlink" href="#geographic-restrictions" title="Permanent link">&para;</a></h4>
<p>To restrict web app access by country of origin, you can enable AWS WAF geographic restrictions. You can specify allowed countries as an array of Country Codes with <code>allowedCountryCodes</code>.
For Country Codes, please refer to <a href="https://en.wikipedia.org/wiki/ISO_3166-2">ISO 3166-2 from Wikipedia</a>.</p>
<p>If "IP Address Restrictions" are also configured, only access from "source IP addresses included in the allowed IP addresses <strong>AND</strong> from allowed countries" will be permitted.</p>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    allowedCountryCodes: ['JP'],
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;allowedCountryCodes&quot;: [&quot;JP&quot;] // Change from null to specify allowed country list to enable
  }
}
</code></pre>
<p>When you specify any of <code>allowedIpV4AddressRanges</code>, <code>allowedIpV6AddressRanges</code>, or <code>allowedCountryCodes</code> and run <code>npm run cdk:deploy</code> again, a WAF stack will be deployed in us-east-1 (AWS WAF V2 currently only supports us-east-1 when used with CloudFront). If you have never used CDK in us-east-1 before, run the following command to bootstrap before deployment:</p>
<pre><code class="language-bash">npx -w packages/cdk cdk bootstrap --region us-east-1
</code></pre>
<h3 id="saml-authentication">SAML Authentication<a class="headerlink" href="#saml-authentication" title="Permanent link">&para;</a></h3>
<p>You can integrate with SAML authentication features provided by IdPs such as Google Workspace or Microsoft Entra ID (formerly Azure Active Directory). Here are detailed integration procedures:</p>
<ul>
<li><a href="SAML_WITH_GOOGLE_WORKSPACE.html">SAML Integration with Google Workspace</a></li>
<li><a href="SAML_WITH_ENTRA_ID.html">SAML Integration with Microsoft Entra ID</a></li>
</ul>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    samlAuthEnabled: true,
    samlCognitoDomainName:
      'your-preferred-name.auth.ap-northeast-1.amazoncognito.com',
    samlCognitoFederatedIdentityProviderName: 'EntraID',
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;samlAuthEnabled&quot;: true,
    &quot;samlCognitoDomainName&quot;: &quot;your-preferred-name.auth.ap-northeast-1.amazoncognito.com&quot;,
    &quot;samlCognitoFederatedIdentityProviderName&quot;: &quot;EntraID&quot;
  }
}
</code></pre>
<ul>
<li>samlAuthEnabled: Setting to <code>true</code> switches to a SAML-specific authentication screen. The conventional authentication using Cognito user pools will no longer be available.</li>
<li>samlCognitoDomainName: Specify the Cognito Domain name to be set in Cognito's App integration.</li>
<li>samlCognitoFederatedIdentityProviderName: Specify the Identity Provider name to be set in Cognito's Sign-in experience.</li>
</ul>
<h3 id="guardrails">Guardrails<a class="headerlink" href="#guardrails" title="Permanent link">&para;</a></h3>
<p>When using the Converse API (i.e., generative AI models that produce text output), guardrails can be applied. To configure this, change <code>guardrailEnabled</code> to <code>true</code> and redeploy.</p>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    guardrailEnabled: true,
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;guardrailEnabled&quot;: true
  }
}
</code></pre>
<p>The default guardrail applies sensitive information filters that have proven effective in Japanese conversations. We've also confirmed that custom word filters and regular expressions for sensitive information filters work, so modify <code>packages/cdk/lib/construct/guardrail.ts</code> as needed. For details, refer to <a href="https://docs.aws.amazon.com/bedrock/latest/userguide/guardrails.html">Guardrails for Amazon Bedrock</a> and <a href="https://docs.aws.amazon.com/cdk/api/v2/docs/aws-cdk-lib.aws_bedrock.CfnGuardrail.html">CfnGuardrail</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to disable guardrails after enabling them, set <code>guardrailEnabled: false</code> and redeploy. This will disable guardrails when calling generative AI, but the guardrail itself will remain. You can completely remove it by opening the management console and deleting the <code>GuardrailStack</code> stack from CloudFormation in the modelRegion. Having the guardrail remain doesn't incur costs, but it's best to delete unused resources.</p>
</div>
<h2 id="cost-related-settings">Cost-Related Settings<a class="headerlink" href="#cost-related-settings" title="Permanent link">&para;</a></h2>
<h3 id="set-schedule-for-automatic-creation-and-deletion-of-kendra-index">Set Schedule for Automatic Creation and Deletion of Kendra Index<a class="headerlink" href="#set-schedule-for-automatic-creation-and-deletion-of-kendra-index" title="Permanent link">&para;</a></h3>
<p>Configure settings to automatically create and delete the Kendra index created by GenerativeAiUseCasesDashboardStack on a predetermined schedule. This helps reduce usage fees that accrue based on Kendra index uptime. After creating a Kendra index, it automatically synchronizes with the S3 data source created by default in this repository.</p>
<p>This feature is only effective when <code>ragEnabled</code> is <code>true</code> AND <code>kendraIndexArn</code> is <code>null</code> (i.e., it doesn't work with externally created Kendra indexes).</p>
<p>Configure as shown in the example below:</p>
<ul>
<li>Setting <code>kendraIndexScheduleEnabled</code> to <code>true</code> enables schedule settings; setting it to <code>false</code> disables scheduling from that deployment forward.</li>
<li>Specify creation and deletion start times in Cron format using <code>kendraIndexScheduleCreateCron</code> and <code>kendraIndexScheduleDeleteCron</code>.</li>
<li>For Cron format details, refer to <a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/events/ScheduledEvents.html">this documentation</a>. However, to comply with EventBridge specifications, specify times in UTC. Currently, only minute, hour, month, and weekDay can be specified. These items must be specified, and other items will be ignored even if specified.</li>
<li>Setting to <code>null</code> means creation/deletion won't be executed. You can set just one to <code>null</code> (configure only one) or both to <code>null</code> (execute nothing).</li>
</ul>
<p>The example below configures index creation to start at 8:00 AM JST Monday-Friday and deletion to start at 8:00 PM JST Monday-Friday.</p>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    kendraIndexScheduleEnabled: true,
    kendraIndexScheduleCreateCron: {
      minute: '0',
      hour: '23',
      month: '*',
      weekDay: 'SUN-THU',
    },
    kendraIndexScheduleDeleteCron: {
      minute: '0',
      hour: '11',
      month: '*',
      weekDay: 'MON-FRI',
    },
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;kendraIndexScheduleEnabled&quot;: true,
    &quot;kendraIndexScheduleCreateCron&quot;: {
      &quot;minute&quot;: &quot;0&quot;,
      &quot;hour&quot;: &quot;23&quot;,
      &quot;month&quot;: &quot;*&quot;,
      &quot;weekDay&quot;: &quot;SUN-THU&quot;
    },
    &quot;kendraIndexScheduleDeleteCron&quot;: {
      &quot;minute&quot;: &quot;0&quot;,
      &quot;hour&quot;: &quot;11&quot;,
      &quot;month&quot;: &quot;*&quot;,
      &quot;weekDay&quot;: &quot;MON-FRI&quot;
    }
  }
}
</code></pre>
<p>Even when the Kendra index is deleted, the RAG feature remains on. RAG-related menus continue to be displayed in the web application (GenU). When executing RAG chat, an error occurs because the index doesn't exist, and an error message indicating "Please check the index creation/deletion schedule" will be displayed.</p>
<p>EventBridge rules are used for scheduling, and Step Functions for process control. You can stop scheduling by manually disabling the EventBridge rule. You can also manually execute the Step Functions state machine to create or delete the index.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li>After index recreation, only the default S3 data source is added.</li>
<li>If you added other data sources after index creation, they will be deleted when the index is deleted, and won't be recreated when the index is recreated; you'll need to add them again.</li>
<li>If you added data sources within this repository's CDK, the data sources will be created but not synchronized. To synchronize CDK-added data sources, either manually synchronize them or modify the <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/lib/construct/rag.ts">code</a> to add them as targets for the Step Functions state machine.</li>
<li>It takes time from starting Kendra index creation until it becomes available. Specifically, index creation and data source synchronization take time. Therefore, <strong>if you have a specific time when you want to start using RAG chat, set the startup time earlier than that</strong>. Since this varies depending on resource availability, data source type, and document size/number, check the actual time required if you need precise uptime settings.</li>
<li>As a rough guideline, index creation takes about 30 minutes, and synchronizing an S3 data source with a few hundred text files takes about 10 minutes (these are just estimates). (Based on this, you would set it 40 minutes earlier.)</li>
<li>Be especially careful when using external services as data sources, as required time can vary significantly. Also be mindful of API call limits.</li>
<li>This doesn't guarantee that the index will be stopped outside the set times; it simply executes startup/shutdown on schedule. Be careful with deployment and scheduling timing.</li>
<li>For example, if you deploy a setting to delete at 8:00 PM at 9:00 PM, it won't be deleted at that point, but will start deletion at 8:00 PM the next day.</li>
<li>When creating a stack (executing cdk:deploy when GenerativeAiUseCasesStack doesn't exist), if <code>ragEnabled</code> is <code>true</code>, a Kendra index is created. Even if schedule times are set, the index is created. The index remains created until the next deletion schedule time.</li>
<li>Currently, there's no feature to notify of startup/shutdown errors.</li>
<li>Each time the index is recreated, the IndexId and DataSourceId change. If other services reference these, you'll need to adapt to these changes.</li>
</ul>
</div>
<h2 id="enabling-monitoring-dashboard">Enabling Monitoring Dashboard<a class="headerlink" href="#enabling-monitoring-dashboard" title="Permanent link">&para;</a></h2>
<p>Create a dashboard that aggregates input/output token counts and recent prompts.
<strong>This dashboard is not built into GenU but is an Amazon CloudWatch dashboard.</strong>
Amazon CloudWatch dashboards can be viewed from the <a href="https://console.aws.amazon.com/cloudwatch/home#dashboards">management console</a>.
To view the dashboard, you need to create an IAM user with permissions to log into the management console and view dashboards.</p>
<p>Set <code>dashboard</code> to <code>true</code>. (Default is <code>false</code>)</p>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    dashboard: true,
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;dashboard&quot;: true
  }
}
</code></pre>
<p>After changing, redeploy with <code>npm run cdk:deploy</code> to apply the changes. A stack named <code>GenerativeAiUseCasesDashboardStack</code> will be deployed in the region specified by <code>modelRegion</code>. The output values will be used in the next steps.</p>
<p>Next, configure Amazon Bedrock log output. Open <a href="https://console.aws.amazon.com/bedrock/home#settings">Amazon Bedrock Settings</a> and enable Model invocation logging. For Select the logging destinations, choose CloudWatch Logs only. (You can also choose Both S3 and CloudWatch Logs if you want to output to S3 as well.) For Log group name, specify the <code>GenerativeAiUseCasesDashboardStack.BedrockLogGroup</code> that was output during <code>npm run cdk:deploy</code>. (Example: <code>GenerativeAiUseCasesDashboardStack-LogGroupAAAAAAAA-BBBBBBBBBBBB</code>) Create a new Service role with any name. Note that Model invocation logging settings should be configured in the region specified as <code>modelRegion</code>.</p>
<p>After configuration, open the <code>GenerativeAiUseCasesDashboardStack.DashboardUrl</code> that was output during <code>npm run cdk:deploy</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to disable the monitoring dashboard after enabling it, set <code>dashboard: false</code> and redeploy. This will disable the monitoring dashboard, but the <code>GenerativeAiUseCasesDashboardStack</code> itself will remain. To completely remove it, open the management console and delete the <code>GenerativeAiUseCasesDashboardStack</code> stack from CloudFormation in the modelRegion.</p>
</div>
<h2 id="using-a-custom-domain">Using a Custom Domain<a class="headerlink" href="#using-a-custom-domain" title="Permanent link">&para;</a></h2>
<p>You can use a custom domain for your website URL. A public hosted zone must already be created in Route53 in the same AWS account. For public hosted zones, please refer to: <a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/AboutHZWorkingWith.html">Working with public hosted zones - Amazon Route 53</a></p>
<p>If you don't have a public hosted zone in the same AWS account, you can also manually add DNS records for AWS ACM SSL certificate validation or use email validation. To use these methods, refer to the CDK documentation for customization: <a href="https://docs.aws.amazon.com/cdk/api/v2/docs/aws-cdk-lib.aws_certificatemanager-readme.html">aws-cdk-lib.aws_certificatemanager module · AWS CDK</a></p>
<p>Set the following values:</p>
<ul>
<li><code>hostName</code> ... The hostname for your website. An A record will be created by CDK; you don't need to create it in advance</li>
<li><code>domainName</code> ... The domain name of the pre-created public hosted zone</li>
<li><code>hostedZoneId</code> ... The ID of the pre-created public hosted zone</li>
</ul>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    hostName: 'genai',
    domainName: 'example.com',
    hostedZoneId: 'XXXXXXXXXXXXXXXXXXXX',
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;hostName&quot;: &quot;genai&quot;,
    &quot;domainName&quot;: &quot;example.com&quot;,
    &quot;hostedZoneId&quot;: &quot;XXXXXXXXXXXXXXXXXXXX&quot;
  }
}
</code></pre>
<h2 id="using-bedrock-from-a-different-aws-account">Using Bedrock from a Different AWS Account<a class="headerlink" href="#using-bedrock-from-a-different-aws-account" title="Permanent link">&para;</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Agent-related tasks (Agent, Flow, Prompt Optimization Tool) do not support using a different AWS account and may result in errors during execution.</p>
</div>
<p>You can use Bedrock from a different AWS account. As a prerequisite, the initial deployment of GenU must be completed.</p>
<p>To use Bedrock from a different AWS account, you need to create one IAM role in that account. You can name the IAM role anything, but you must specify the following IAM role names (that were created during GenU deployment) in the Principal of the IAM role created in the different account:</p>
<ul>
<li><code>GenerativeAiUseCasesStack-APIPredictTitleService</code></li>
<li><code>GenerativeAiUseCasesStack-APIPredictService</code></li>
<li><code>GenerativeAiUseCasesStack-APIPredictStreamService</code></li>
<li><code>GenerativeAiUseCasesStack-APIGenerateImageService</code></li>
</ul>
<p>For details on how to specify Principals, refer to: <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_principal.html">AWS JSON Policy Elements: Principal</a></p>
<p>Principal configuration example (set in the different account)</p>
<pre><code class="language-json">{
  &quot;Version&quot;: &quot;2012-10-17&quot;,
  &quot;Statement&quot;: [
    {
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Principal&quot;: {
        &quot;AWS&quot;: [
          &quot;arn:aws:iam::111111111111:role/GenerativeAiUseCasesStack-APIPredictTitleServiceXXX-XXXXXXXXXXXX&quot;,
          &quot;arn:aws:iam::111111111111:role/GenerativeAiUseCasesStack-APIPredictServiceXXXXXXXX-XXXXXXXXXXXX&quot;,
          &quot;arn:aws:iam::111111111111:role/GenerativeAiUseCasesStack-APIPredictStreamServiceXX-XXXXXXXXXXXX&quot;,
          &quot;arn:aws:iam::111111111111:role/GenerativeAiUseCasesStack-APIGenerateImageServiceXX-XXXXXXXXXXXX&quot;
        ]
      },
      &quot;Action&quot;: &quot;sts:AssumeRole&quot;,
      &quot;Condition&quot;: {}
    }
  ]
}
</code></pre>
<p>Set the following parameter:</p>
<ul>
<li><code>crossAccountBedrockRoleArn</code> ... The ARN of the IAM role created in advance in the different account</li>
</ul>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/parameter.ts">parameter.ts</a></strong></p>
<pre><code class="language-typescript">// parameter.ts
const envs: Record&lt;string, Partial&lt;StackInput&gt;&gt; = {
  dev: {
    crossAccountBedrockRoleArn:
      'arn:aws:iam::AccountID:role/PreCreatedRoleName',
  },
};
</code></pre>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;crossAccountBedrockRoleArn&quot;: &quot;arn:aws:iam::AccountID:role/PreCreatedRoleName&quot;
  }
}
</code></pre>
<p>Run <code>npm run cdk:deploy</code> after changing the settings to apply the changes.</p>
<h2 id="deploying-multiple-environments-in-the-same-account">Deploying Multiple Environments in the Same Account<a class="headerlink" href="#deploying-multiple-environments-in-the-same-account" title="Permanent link">&para;</a></h2>
<p>When deploying multiple environments in the same account, you need to deploy with different stack names.</p>
<p>Setting <code>env</code> will append it as a suffix to each stack name and deploy as a separate environment.</p>
<p><code>env</code> is also used for environment determination in <code>parameter.ts</code>, and if the environment specified by <code>env</code> exists in <code>parameter.ts</code>, all parameters will be overwritten with the values from <code>parameter.ts</code>. If the environment specified by <code>env</code> doesn't exist in <code>parameter.ts</code>, the application will be deployed with the parameters from the <code>context</code> in <code>cdk.json</code>.</p>
<p>Set the following value:</p>
<ul>
<li><code>env</code> ... Environment name (default: "" (empty string))</li>
</ul>
<p><strong>Edit <a href="https://github.com/aws-samples/generative-ai-use-cases/blob/main/packages/cdk/cdk.json">packages/cdk/cdk.json</a></strong></p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;env&quot;: &quot;&lt;environment name&gt;&quot;
  }
}
</code></pre>
<p>Alternatively, you can <strong>specify context in the command</strong> when deploying:</p>
<pre><code>npm run cdk:deploy -- -c env=&lt;environment name&gt;
</code></pre>
<p>Configuration example</p>
<pre><code class="language-json">// cdk.json
{
  &quot;context&quot;: {
    &quot;env&quot;: &quot;dev&quot;
  }
}
</code></pre>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="DEPLOY_ON_CLOUDSHELL.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: (Optional) Deploy with AWS CloudShell">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                (Optional) Deploy with AWS CloudShell
              </div>
            </div>
          </a>
        
        
          
          <a href="SAML_WITH_GOOGLE_WORKSPACE.html" class="md-footer__link md-footer__link--next" aria-label="Next: Authenticate with Google Workspace">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Authenticate with Google Workspace
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      © 2025, Amazon Web Services, Inc. or its affiliates. All rights reserved.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.trackings", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>